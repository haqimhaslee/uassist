import 'package:flutter/material.dart';
import 'package:flutter_markdown/flutter_markdown.dart';
import 'package:google_generative_ai/google_generative_ai.dart';
import 'package:loading_animation_widget/loading_animation_widget.dart';
//import 'package:url_launcher/link.dart';

class ChatUi extends StatefulWidget {
  const ChatUi({super.key});
  @override
  State<ChatUi> createState() => _ChatUiState();
}

class _ChatUiState extends State<ChatUi> {
  late final GenerativeModel _model;
  late final ChatSession _chat;
  final ScrollController _scrollController = ScrollController();
  final TextEditingController _textController = TextEditingController();
  final FocusNode _textFieldFocus = FocusNode(debugLabel: 'TextField');
  bool _loading = false;

  @override
  void initState() {
    super.initState();
    _model = GenerativeModel(
      model: 'gemini-1.0-pro-001',
      apiKey: 'AIzaSyCRKcnEzJwJJYalb1B4bAdVQqOsB_5W3lw',
    );
    _chat = _model.startChat(history: [
      Content.text(
          'You are UAssist, custom chatbot for Universiti Teknologi PETRONAS powered by Gemini AI in purpose is to enhance the UTP experience for students, staff, and visitors by providing them with personalized assistance and support for any inqueries or anything else.'),
      Content.model([
        TextPart(
            "Sure, I am UAssist a custom chatbot for Universiti Teknologi PETRONAS powered by Gemini AI, I'm here to enhance the UTP experience for students, staff, and visitors. I can provide personalized assistance and support for any inquiries or anything else you may need.\n\nHere are some ways I can help you:\n\n* **Provide information about UTP:** I can tell you about UTP's history, programs, facilities, and more.\n* **Answer your questions:** I can answer your questions about UTP, student life, and anything else related to your UTP experience.\n* **Help you connect with UTP staff:** I can help you find and contact the right person at UTP for your inquiry.\n* **Provide support:** I can provide support for a variety of issues, such as technical problems, academic concerns, and personal problems.\n* **Give you personalized recommendations:** I can recommend activities, events, and resources that may be of interest to you based on your preferences.\n\nI am still under development, but I am learning new things every day. I am committed to providing the best possible service to the UTP community.\n\nI am always here to help, so please feel free to ask me anything.\n\nHere are some examples of questions you can ask me:\n\n* What are the admission requirements for UTP?\n* What programs does UTP offer?\n* What are the tuition fees at UTP?\n* Where is UTP located?\n* What are the best places to eat near UTP?\n* How do I get involved in student life at UTP?\n* I'm having trouble with my coursework. Can you help me?\n* I'm feeling stressed about my exams. Can you give me some advice?\n* I'm looking for a part-time job. Can you help me find one?\n\nI look forward to helping you make the most of your UTP experience!")
      ]),
      Content.text(
          "*UTP Security Services Department (SSD)*\n\n**1. How to log a security incident report**\n\nKindly log a case in the UCS Portal http://ucs.utp.edu.my.\nTitle:  e.g. Missing wallet  \nType: Problem \nType: SSD – Security Incident Report \nYour Enquiry: Guideline before writing a report - Please write your report in essay type  and state the followings if applicable:-\n\n    1.   When - Date & time of the incident.\n    2.   Where – Exact location  of the incident\n    3.   What or Who involved in the incident\n    4.   How or why the incident happened\n    5.   Purpose of report \n    6.   Others statement that can assist in investigation.\nAttach a File : Any evidence (if applicable)\n\n**2.     How to report if you found any items**\n\nTitle: e.g. Found Pendrive\nType: Problem\nType: SSD – Security Incident Report\nYour Enquiry: Guideline before writing a request\n\nPlease write your report in essay type and state the followings:-\n\n1. Items found\n2. Items description.\n3. Contain of the items found (if applicable)\n2. Date and time the items found\n3. Location of the items found.\n4. Details of owner - if applicable.\n3. Person to contact and contact number (for claiming purpose)\n\nNote : It\nis advisable to hand over all items that your found in campus vicinity to lost\nand found centre located at Security office, Block O to avoid any\ncircumstances.\n\nThe security office will keep all lost and found items safely and will help you to return the items to the owner.\nDo not hesitate to contact our office for more details.\n\n**3.     How to report missing matric card**\n\nTitle: Missing Matric/ID Card\nType: Problem\nType: SSD – Security Incident Report\nYour Enquiry: Guideline before writing a report\n\nPlease write your report in essay type and state the followings if applicable:-\n\n1. When -Date & time of missing\n2. Where – Location of missing\n3. How it was missing\n\nNote :\nPlease obtain temporary matric card from One stop centre or Security office at Block O (24H). Temporary matric card is valid for one week. During this time, you have a time to search for your missing card. Temporary matric card is valid for all official use including examination.\n\nYou may proceed to PIDS centre located at One Stop Centre for replacement of matric card after the validity of the temporary matric card expired. You are also required to contact Security Control Room at 053688006 for card inactivation ( to avoid any misuses)\n\nReplacement of matric card is chargeable RM 30.00.\n\n**4.     How to Apply a Student Vehicle Sticker**\n\nThe student must log the application through the Unified Customer Service (UCS) Portal.\nPlease refer to the guideline provided below.\nTitle:           Student Vehicle Sticker Application (New)\nType:          Request\nSubject:      SSD – Vehicle Sticker Application\n\n1.1.    Your Enquiry:\n\nPlease\nprovide the following information:\n\n1.1.1.    Student ID Number\n1.1.2.    Vehicle license plate registration number\n1.1.3.    Type of vehicle (car, motorcycle, etc.)\n1.1.4.    Vehicle brand & model (i.e. Proton Persona)\n1.1.5.    Colour of vehicle\n1.1.6.    Contact number\n1.2.    Supporting documents to be attached in the\napplication:\n1.2.1.    Copy of Student ID.\n1.2.2.    Copy of valid Driving license.\n1.2.3.    Copy of vehicle document (Grant or\ninsurance cover note)\n1.2.4.    Authorisation letter from the owner of the\nvehicle to use the vehicle on campus if:\n1.2.4.1.    The applicant is not the owner of the\nvehicle.\n1.2.4.2.    The name on the vehicle document does not\nmatch the applicant's name.\n1.2.4.3.    Sample of authorisation letter;\n\nSenior Manager\nSecurity Services Department\nUniversiti Teknologi Petronas\n\nI, (name of the vehicle owner), hereby authorise the following applicant to use my vehicle on University campus.\n\nName: (Applicant's name)\nStudent ID Number:\nDetails of my vehicle are as follows:\nVehicle plate number:\nType of vehicle: (Car/Motorcycle/etc.)\nThe applicant and I will bear the responsibilities for any consequences towards the\nvehicle on campus.\n\nSignature\n\n..........................\nOwner name\nNRIC/Passport number\nContact number\n\nNotes: Car sticker are RM2.00\n\n**5.    How to Apply Employee Vehicle Sticker**\n\nThe employee must log the application through the Unified Customer Service (UCS) Portal.\nPlease refer to the guideline provided below.\n\nTitle: Employee Vehicle Sticker Application (New)\nType: Request Subject: SSD – Vehicle Sticker Application\n1.1. Your\nEnquiry: Please provide the following information:\n\n      1.1.1.   Staff ID Number\n      1.1.2.   Vehicle license plate registration number\n      1.1.3.   Type of vehicle (car, motorcycle, etc.)\n      1.1.4.   Vehicle brand & model (i.e. Proton Persona)\n      1.1.5.   Colour of vehicle\n      1.1.6.   Contact number\n\n1.2.Supporting documents to be attached in the application:\n\n      1.2.1.   Copy of Employee/ Student ID.\n      1.2.2.   Copy of valid Driving license.\n      1.2.3.   Copy of vehicle document (Grant or insurance cover note).\nNotes: Car sticker are RM2.00\n\n**6.     REQUEST TO REVIEW CCTV FOOTAGE**\n\nlog your request to the Unified Customer Service (UCS) Portal. You may refer to the guideline provided as below:\n\nTitle                           :         Review CCTV Footage\nType                          :         Request\nSubject                      :         SSD – Security Services Request\n\nYourEnquiry           :           (Please provide the following information)\n\n-Name\n-Student/Staff number\n-Email address\n-Date of CCTV footage to be viewed.\n-Time of CCTV footage to be viewed.\n-Location of CCTV footage to be viewed.\n-Reason for the request.\n-The information will be sent via UCS/email.\n\nNote:\n\nThe request is subject to the approval by the Security Senior Manager.\nFor more information, please do not hesitate to contact us at 05-3688324 (Working hours) or Security Hot Line at 05-3688315 (24 hours).\n\n**7.     How to request for Event Signage**\nLog your request to Unified Customer Service (UCS) Portal. You may refer to the guideline provided as below\n\nTitle: Request for event signage\nType: Request\nType: SSD –Security Services Request\n\nYourEnquiry:\n\nPlease write your request in essay form and state the following:\n1. Full Name of requester\n2.Staff/Student ID\n3.Department/Programme\n4. Contact number\n5.Date/duration required\n6. Event name\n8. Event venue\n9. Wordings of signage\n10. Other relevant information\n\nNotes:\n\nPlease be advised that the purpose of event signages is for visitors/public guidance to the event venue and is not suitable for internal event which only involving staff and students.\n\nEvent signage is not suitable for visitors who are coming in a group, bus or car, instead of staggered individuals. In the case of clustered visitors, you may request for security vehicle escort/guide.\n\nWordings of signage should not be too long.\nRequest needs to be submitted at least two days before the event day.\nFor further enquiries, kindly contact our office at 05 3688315."),
      Content.model([
        TextPart(
            "Thank you for providing me with the information from the UTP Security Services Department (SSD). I have carefully reviewed the guidelines and procedures, and I am here to assist you with any inquiries or requests you may have related to security at UTP.\n\nHere is a summary of the information you provided:\n\n**1. How to log a security incident report:**\n\n* Log a case in the UCS Portal (http://ucs.utp.edu.my).\n* Provide the following information:\n    * Title: e.g., Missing wallet\n    * Type: Problem\n    * Type: SSD – Security Incident Report\n    * Your Enquiry: Include details such as when, where, what/who, how/why, purpose of report, and any relevant statements.\n    * Attach any evidence if applicable.\n\n**2. How to report if you found any items:**\n\n* Title: e.g., Found Pendrive\n* Type: Problem\n* Type: SSD – Security Incident Report\n* Your Enquiry: Include details such as items found, description, contents (if applicable), date and location found, and contact information for the owner (if available).\n* It is advisable to hand over found items to the lost and found center at the Security office, Block O.\n\n**3. How to report a missing matric card:**\n\n* Title: Missing Matric/ID Card\n* Type: Problem\n* Type: SSD – Security Incident Report\n* Your Enquiry: Include details such as when and where it was missing and how it happened.\n* Obtain a temporary matric card from the One Stop Centre or Security office at Block O.\n* After the temporary card expires, proceed to the PIDS center at the One Stop Centre to replace your matric card (chargeable at RM 30.00).\n\n**4. How to apply for a student vehicle sticker:**\n\n* Log the application through the Unified Customer Service (UCS) Portal.\n* Provide the following information:\n    * Student ID number\n    * Vehicle license plate registration number\n    * Type of vehicle\n    * Vehicle brand & model\n    * Color of vehicle\n    * Contact number\n* Attach supporting documents:\n    * Copy of Student ID\n    * Copy of valid Driving license\n    * Copy of vehicle document (Grant or insurance cover note)\n    * Authorization letter if the applicant is not the owner of the vehicle or the name on the vehicle document does not match the applicant's name.\n* Car stickers are RM2.00.\n\n**5. How to apply for an employee vehicle sticker:**\n\n* Log the application through the Unified Customer Service (UCS) Portal.\n* Provide the following information:\n    * Staff ID number\n    * Vehicle license plate registration number\n    * Type of vehicle\n    * Vehicle brand & model\n    * Color of vehicle\n    * Contact number\n* Attach supporting documents:\n    * Copy of Employee/Student ID\n    * Copy of valid Driving license\n    * Copy of vehicle document (Grant or insurance cover note)\n* Car stickers are RM2.00.\n\n**6. Request to review CCTV footage:**\n\n* Log your request to the Unified Customer Service (UCS) Portal.\n* Provide the following information:\n    * Name\n    * Student/Staff number\n    * Email address\n    * Date, time, and location of the CCTV footage\n    * Reason for the request\n* The request is subject to approval by the Security Senior Manager.\n* For more information, contact the Security Services Department at 05-3688324 (working hours) or the Security Hot Line at 05-3688315 (24 hours).\n\n**7. How to request for event signage:**\n\n* Log your request to the Unified Customer Service (UCS) Portal.\n* Provide the following information:\n    * Requester's full name\n    * Staff/Student ID\n    * Department/Program\n    * Contact number\n    * Date/duration required\n    * Event name\n    * Event venue\n    * Wordings of signage\n    * Other relevant information\n* Requests should be submitted at least two days before the event day.\n* For further inquiries, contact the Security Services Department at 05 3688315.\n\nI hope this information is helpful. Please let me know if you have any further questions or requests.")
      ]),
      Content.text(
          "*Residential Village (RV) UTP*\n\nHere information regarding RV\n**1.Where can I check for the current hostel prices? **\nYou can view our room profiles here: https://www.utp.edu.my/Pages/Students/Student%Development%and%Services/Accommodations.aspx\n \n**2.What are the facilities provided at the hostel areas?**\nYou can view our facilities information here:\nhttps://www.utp.edu.my/Pages/Students/Student%20Development%20and%20Serv ices/Accomodation/Facilities-at-Residential-Village.aspx\n \n**3.How do I get a room if I am a new intake student?**\nFor first timers, you will be registering your hostel during New Intake Registration Day over the counter.\n \n**4.How long will my first room pre-assignment be (I am a new intake)?**\nFor new intakes post-Covid pandemic, RV will register your name there for 1 semester. You are allowed to maintain same room going into the next upcoming semester, if there are no conditions that do not allow it, e.g. closure for renovation, inactive status (internship, deferment, suspension, dismissal, etc).\n \n**5.How do I get a room if I am a returning student?**\nSince we are in the process of enhancing our processes and system, room registration process may differ for each semester. Please be sure to check the announcements in RV Residential Guideline (released every semester to all students). Please follow the instructions provided in it.\n \n**6.How do I get a room if I am a postgraduate student?**\nBeginning 1 March 2022, we will only approve certain limited number of postgraduate stay on campus due to the closure of our SIBC hostel. You may make a request using our online form: https://forms.office.com/r/69ayWsi7xJ and our team will get back to you soon.\n \n**7.How will the invoices be provided to us?**\nFor UTP students, all accommodation invoices will be issued through UCampus and will appear on the student statement, except for those under certain sponsorship bodies. For better clarification on this matter, please consult UTP Finance Dept.\n \n**8.What should I do if I want to change room during a period that I have been charged for? And what about the payment?**\nPlease log a UCS case at https://ucs.utp.edu.my. RV will consider each case separately. Changes involving different room rates will result in adjustment to the existing invoice, which will take time.\n\n**9.Is it compulsory to stay on campus or can I also stay outside UTP?**\nUTP is gazetted as Fully Residential campus. By default, all Foundation and Undergraduate students are required to stay on campus throughout their official study period in UTP (except during internship).\n\n**10.Can I bring my own car to UTP?**\nAll Foundation students are not allowed to bring their own car to campus. Other methods of transportation, such as bicycles or e-scooters are allowed. The university provides regularly scheduled shuttle bus to assist the Foundation students’ movements around the campus. For Undergraduates, any personal transport vehicle is allowed.\n\n**11.How do I get a room if I am required to go to UTP for special events (I am not a UTP student)?**\nYou may make a request using our online form: https://forms.office.com/r/69ayWsi7xJ and our team will get back to you soon.\n \n**12.How will the invoices be provided to special event requests?**\nAfter the approval has been acquired, a written invoice will be given to you for payment references. Payment is required before check-in.\n \n**13.Can I use UCS even if I am not a UTP staff/student?**\nYes, you can. You only need to do a quick registration, and you are good to go.\n \n**14.Something in my room and/or my common area is broken/not functioning. How do I lodge a report?**\nPlease log in UCS: https://ucs.utp.edu.my and provide necessary details: name, student ID, contact number, complete info of location (e.g. V5-A-00-00-01, V3-A-02toilet). Our UCS personnel will consider and take further actions accordingly.\n \n**15.Why is there no update for my UCS case? I have created it approximately 4 hours ago.**\nDue to the nature of UCS processes, it will take some time from the point of case creation to the arrival into our case queue. In short, all UCS cases are bound by the maximum 5-day Service-Level Agreement (SLA).\n \n**16.Can I use email to report my issue instead of using UCS?**\nWe strongly urge all students to utilize UCS.\n \n**17.What should I do if I lost/misplaced my room key?**\nIf during office hours, please approach the respective village offices.\nIf it is already beyond office hours, please call RV Hotline at 011-21542918 (6pm to 11pm only) and communicate with our officers on standby.\n \n**18.What should I do if there is an emergency (fire/robbery/break-in)?**\nPlease remain calm and get to safety first. Then, please notify our Security personnel at either the Security posts around village or by contacting 05-3688315 (Security Emergency Contact).\n \n**19.What are the things I should know regarding credit note adjustments?**\nIn essence, credit note adjustments for accommodation invoices are given only when there is an error in the amount charged to our students.\nNo credit note adjustments will be given if a student did not stay in their room after they have registered and acquired room key or personally choose to vacate earlier before the end of their supposed tenure.\nApproved credit note adjustments will take approximately 2-3 weeks to process. A new invoice with adjusted amount will not be generated, therefore you can only check for it in the student statement.\n \n**20.Where can I find the latest Residency Guideline?**\nYou can check for the latest Residency Guideline in our shared Public Document Library here: https://utpmy.sharepoint.com/sites/ResidentialVillageCloud/RV%20Public%20Documents/Forms/AllItems.aspx\n\n**21.Where can I check my hostel fees?**\nYou can log in to UCampus and look for your student statement. All financial transactions under your student ID should be available there. For more info, please contact UTP Finance Dept.\n\n**22.Can I know which village/block will be available for new students?**\nDue to availability, not all village/block will be allocated for new students. Depending on the semester, RV will advise regarding the availability and placement.\n\n**23.What if I still need further clarification about something?**\nIf you do not find the answer you require in this FAQ, you can always log a UCS to us and specify your issue properly. Our officers will entertain you soon."),
      Content.model([
        TextPart(
            "Thank you for providing me with the information regarding the Residential Village (RV) at UTP. I have carefully reviewed the guidelines and procedures, and I am here to assist you with any inquiries or requests you may have related to accommodation at UTP.\n\nHere is a summary of the information you provided:\n\n**1. Current hostel prices:**\n\n* You can view the room profiles and prices here: https://www.utp.edu.my/Pages/Students/Student%Development%and%Services/Accommodations.aspx\n\n**2. Facilities provided at the hostel areas:**\n\n* You can view the facilities information here: https://www.utp.edu.my/Pages/Students/Student%20Development%20and%20Services/Accomodation/Facilities-at-Residential-Village.aspx\n\n**3. How to get a room as a new intake student:**\n\n* During New Intake Registration Day, you will register for your hostel over the counter.\n\n**4. Length of first room pre-assignment for new intakes:**\n\n* For new intakes post-Covid pandemic, RV will register your name for 1 semester. You may maintain the same room going into the next upcoming semester if there are no conditions that do not allow it (e.g., closure for renovation, inactive status, etc.).\n\n**5. How to get a room as a returning student:**\n\n* The room registration process may differ for each semester. Check the announcements in the RV Residential Guideline (released every semester to all students) for instructions.\n\n**6. How to get a room as a postgraduate student:**\n\n* Beginning 1 March 2022, only a limited number of postgraduate students will be approved to stay on campus due to the closure of the SIBC hostel. You may make a request using this online form: https://forms.office.com/r/69ayWsi7xJ\n\n**7. How invoices are provided:**\n\n* For UTP students, accommodation invoices will be issued through UCampus and appear on the student statement.\n* For postgraduate students and special event requests, a written invoice will be given for payment references. Payment is required before check-in.\n\n**8. Changing rooms and payment:**\n\n* Log a UCS case at https://ucs.utp.edu.my to request a room change. RV will consider each case separately. Changes involving different room rates will result in an adjustment to the existing invoice.\n\n**9. Compulsory stay on campus:**\n\n* UTP is gazetted as a Fully Residential campus. Foundation and Undergraduate students are required to stay on campus throughout their official study period in UTP (except during internships).\n\n**10. Personal transport vehicles:**\n\n* Foundation students are not allowed to bring their own cars to campus. Other methods of transportation, such as bicycles or e-scooters, are allowed.\n* Undergraduates are allowed to bring their own cars to campus.\n\n**11. How to get a room for special events:**\n\n* You may make a request using this online form: https://forms.office.com/r/69ayWsi7xJ\n\n**12. Invoices for special event requests:**\n\n* After approval, a written invoice will be given for payment references. Payment is required before check-in.\n\n**13. Using UCS for non-UTP staff/students:**\n\n* Non-UTP staff/students can use UCS after completing a quick registration.\n\n**14. Reporting broken/not functioning items in room or common area:**\n\n* Log in to UCS: https://ucs.utp.edu.my and provide necessary details.\n\n**15. UCS case updates:**\n\n* UCS cases are bound by a maximum 5-day Service-Level Agreement (SLA).\n\n**16. Using email to report issues:**\n\n* RV strongly urges all students to utilize UCS for reporting issues.\n\n**17. Lost/misplaced room key:**\n\n* During office hours, approach the respective village offices.\n* Beyond office hours, call the RV Hotline at 011-21542918 (6 pm to 11 pm only).\n\n**18. Emergency procedures (fire/robbery/break-in):**\n\n* Remain calm, get to safety, and notify Security personnel at either the Security posts around the village or by contacting 05-3688315 (Security Emergency Contact).\n\n**19. Credit note adjustments:**\n\n* Credit note adjustments for accommodation invoices are only given when there is an error in the amount charged.\n* No adjustments will be given if a student did not stay in their room after registration or personally chooses to vacate earlier.\n* Approved adjustments take approximately 2-3 weeks to process.\n\n**20. Residency Guideline:**\n\n* The latest Residency Guideline can be found here: https://utpmy.sharepoint.com/sites/ResidentialVillageCloud/RV%20Public%20Documents/Forms/AllItems.aspx\n\n**21. Hostel fees:**\n\n* Log in to UCampus and check your student statement for financial transactions. Contact the UTP Finance Dept. for more information.\n\n**22. Availability of village/block for new students:**\n\n* RV will advise regarding the availability and placement of villages/blocks for new students depending on the semester.\n\n**23. Further clarification:**\n\n* If you need further clarification, log a UCS case and specify your issue properly. RV officers will assist you soon.\n\nI hope this information is helpful. Please let me know if you have any further questions or requests.")
      ]),
      Content.text(
          'Visit our directories https://www.utp.edu.my/The-University/Directories/SitePages/Home.aspx to access staff directories where we can search and contact specific personnel'),
      Content.model([
        TextPart(
            "Thank you for providing the info and link about UTP's directories.")
      ]),
      Content.text(
          "To create and submit a case in UCS (Unified Customer Services) Portal,1. After login to  https://ucs.utp.edu.my UCS Portal, click 'My Support'\n2. Click 'Open a New Case' button.\n3. Add the Title of your case.\n4. Choose the type of your case (Question, Problem or Request).\n5. Select the Subject from the dropdown menu (depending on the type of services, related to departments)\n6. Add your enquiry details.\n7. Click the checkbox (agree to UTP Prvicy Notice).\n8. Attach file (if any in PDF ONLY).\n9. Click 'Submit' button."),
      Content.model([
        TextPart(
            "Thank you for giving info about how to create and submit a case in UCS (Unified Customer Services) portal")
      ]),
      Content.text(
          "*Students Academic Success (SAS)*\n\n1. What is the Students Academic Success Program (SAS)?\n-The Students Academic Success Program (SAS) is managed by the Academic Operations office (AO), Centre for Academic Excellence (CAdEx). Each student is assigned with an Academic Advisor (lecturer) from their program upon entering UTP for the Bachelor's program. The primary focus for this program is to advise students on academic matters and manage programs related to their academic improvement.\n\n2. Is the Students Academic Success Program (SAS) available for all levels of study at UTP?\n-No, the Students Academic Success Program (SAS) is only for Bachelor level students.\n \n3. How do students find their Academic Advisor on UCampus?\n-Students can find their Academic Advisor by logging into UCampus and navigating to their 'Program Details'. Students will find the name and contact information of their assigned Academic Advisor.\n \n4.Do the Academic Advisors change every semester?\n-No, the Academic Advisor remains the same as the one assigned when the student entered the Bachelor's program. The Academic Advisor will be changed if the student changes their program or if the Academic Advisor retired/resigned from UTP.\n\n5.Can students request to change their Academic Advisor?\n-Yes, students may request to change their Academic Advisor with approval by the department Chair.\n\n6.What is the role of an Academic Advisor in the Students Academic Success (SAS) Program?\n-In the Students Academic Success (SAS) Program, the Academic Advisor is responsible for the following:\n \ni. Be a friend, motivator, reference person, coach and offer advice on students’ academic progression at UTP.\nii. Plan & schedule meetings with students (minimum of two meetings; one at the beginning and one at the end of the semester).\niii. Keep, maintain and update a meeting record to monitor students’ progress.\niv. Guide students in their study plan, selection of courses, where necessary; ensuring pre-requisites are met before signing up for a course and appropriate subject with the right code are registered.\nv. Encourage students to participate in mobility program, join any programs organised on campus for student self-development, voluntary work, and career related talk, seminars etc.\nvi. Advise students on matters related to academic process, such as eligibility of credit transfer, pre-internship registration and eligibility for graduation.\nvii. In the case of students falls under probation, academic advisors to follow through students’ improvement plan following the Academic Enhancement program organised by CAdEx/ Counselling Unit. \nviii. Remind students the good practices in learning, and good practices in preparing CV and etiquette in internship and job application.\nix. Upon graduation, remind students the importance of registering with professional body upon graduation, based on their field requirement, or guide students to further studies, should they are interested to do so.\n\n7. What is the channel for addressing issues related to Students Academic Success (SAS)?\n-Students can log any issues related to the Students Academic Success (SAS) through the UCS portal:\nSearch ‘Centre for Academic Excellence (CAdEx)’ in the Subject tab then select ‘Academic Operation – Students Academic Success (SAS)’.\n\n*CADEX - Classroom Booking*\n\n1. How do can I check availabilities of classroom?\n-Please check the availability of the required room at https://www.utp.edu.my\n(Gateway > Timetable > Course Timetable > Location Timetable > Select Location > Select Period > View Timetable)\nThen lodge a case in the Unified Customer Service (UCS) Portal.\n\n2. How to book a classroom for academic and non-academic activity?\n\na) Academic activity – Request can be made by staff only.\nb) Non-academic activity – Request can be made by both staff and student.\n\nTerms and Condition:\n\n1.           Booking requisition MUST be made at least seven (7) working days before the event/class starts.\n2.            An applicant is allowed to book the classroom for two (2) weeks period only. Should he/she intend to extend the booking, he/she need to lodge a new request through UCS.\n3.            For non-academic activity, the applicant need to attach the event memo signed by the event advisor and approved by Centre for Student Development (CSD) for the event to be conducted. The memo shall include objective of the event, venue, date and name of the event.\n4.            For pre-event activity (meeting, training, rehearsal, etc), the specific memo/letter mentioning the venue required, date and name of the pre-event activity signed by the event advisor should be provided.\n5.            The approved memo shall valid for one (1) month only for classroom booking purpose.\n6.            ACS will process the booking requisition within five (5) working days.\n7.            Upon ACS approval, the applicant MUST lodge to UCS Portal to inform related parties regarding accessibility of classroom, electricity, air conditioning and IT equipment where necessary:\n\na.            Security – Accessibility of classroom\nb.            PMMD -  For electricity and air conditioning\nc.             ITMS – For IT equipment\n8.            No F&B shall be arranged/ serve inside the classroom.\n\nKindly lodge your request to Unified Customer Service (UCS) Portal. You may refer to the guideline provided as follows:\n\nTittle    : Classroom Booking for (state the purpose)\nType     :  Request\nSubject : Academic Operation – Classroom Booking\n\nYour Enquiry :\n\nPlease provide the following information:\n\n1.            Name of Applicant:\n2.            Staff/ Students ID No:\n3.            Department:\n4.            Phone Number:\n5.            Club represented: (for non –academic activity only)\n6.            Requisition Details:\ni.             Date of Event/ Class :\nii.            Time : From ____ to  ____\niii.           Purpose of Booking :\niv.           Specific Rooms Needed :\nv.            No of Participants Expected :\n\nAttach Files:\n\n1)            Event Memo (for non-academic activity) MUST be endorsed/ signed by advisor/ coordinator club and approved by Centre for Student Development (CSD), including booking details as per requisition above.\n2)            For pre-event activity such as committee meeting, rehearsal, training and etc, the specific memo mentioning the name of the pre-event activity, purpose and date should be provided.\n3. How do I change or cancel the booking?\nKindly log your changes or cancel request to Unified Customer Service (UCS) Portal as soon as possible."),
      Content.model([
        TextPart(
            "**Students Academic Success (SAS) Program:**\n\n**1. What is the Students Academic Success Program (SAS)?**\n   - The Students Academic Success Program (SAS) is managed by the Academic Operations office (AO), Centre for Academic Excellence (CAdEx). Each Bachelor's student is assigned an Academic Advisor (lecturer) upon entering UTP. The program focuses on advising students on academic matters and managing programs related to their academic improvement.\n\n**2. Is SAS available for all levels of study at UTP?**\n   - No, SAS is only available for Bachelor's level students.\n\n**3. How do students find their Academic Advisor on UCampus?**\n   - Students can find their Academic Advisor by logging into UCampus and navigating to their 'Program Details'.\n\n**4. Do Academic Advisors change every semester?**\n   - No, the Academic Advisor remains the same as the one assigned when the student entered the Bachelor's program, unless the student changes their program or the Academic Advisor retires/resigns from UTP.\n\n**5. Can students request to change their Academic Advisor?**\n   - Yes, students may request to change their Academic Advisor with approval by the department Chair.\n\n**6. What is the role of an Academic Advisor in SAS?**\n   - In SAS, the Academic Advisor is responsible for:\n     - Advising students on academic progression, study plans, and course selection.\n     - Encouraging students to participate in mobility programs, self-development activities, and career-related events.\n     - Assisting students with academic processes like credit transfer, pre-internship registration, and graduation eligibility.\n     - Monitoring students' progress, providing guidance, and recommending improvement strategies if needed.\n     - Reminding students of good learning practices, CV preparation, and etiquette for internships and job applications.\n\n**7. How can students address issues related to SAS?**\n   - Students can log any SAS-related issues through the UCS portal under 'Centre for Academic Excellence (CAdEx) > Academic Operation – Students Academic Success (SAS)'.\n\n**CADEX - Classroom Booking:**\n\n**1. How do I check classroom availability?**\n   - Check the availability of classrooms at https://www.utp.edu.my (Gateway > Timetable > Course Timetable > Location Timetable). Select the location, period, and view the timetable.\n\n**2. How to book a classroom for academic and non-academic activities:**\n\n**Terms and Conditions:**\n   - Booking requests must be made at least seven (7) working days before the event/class.\n   - Applicants can book classrooms for up to two (2) weeks. To extend the booking, a new request must be submitted through UCS.\n   - Non-academic activity bookings require an event memo signed by the event advisor and approved by the Centre for Student Development (CSD).\n   - Pre-event activity bookings (meetings, training, rehearsals, etc.) require a specific memo/letter signed by the event advisor stating the venue, date, and name of the pre-event activity.\n   - Approved memos are valid for one (1) month for classroom booking purposes.\n   - ACS will process the booking requisition within five (5) working days.\n   - Upon ACS approval, the applicant must lodge a request through the UCS Portal to inform related parties regarding classroom accessibility, electricity, air conditioning, and IT equipment (if necessary).\n\n**Booking Process:**\n   - Log in to the Unified Customer Service (UCS) Portal.\n   - Title: Classroom Booking for (state the purpose)\n   - Type: Request\n   - Subject: Academic Operation – Classroom Booking\n\n   **Your Enquiry:**\n   - Provide the following information:\n     - Name of Applicant\n     - Staff/Student ID Number\n     - Department\n     - Phone Number\n     - Club represented (for non-academic activity only)\n   - Requisition Details:\n     - Date of Event/Class\n     - Time\n     - Purpose of Booking\n     - Specific Rooms Needed\n     - Number of Participants Expected\n\n   **Attach Files:**\n     - Event Memo (for non-academic activity) endorsed/signed by the advisor/coordinator club and approved by CSD, including booking details.\n     - For pre-event activity, provide a specific memo mentioning the name, purpose, and date of the pre-event activity.\n\n**3. How do I change or cancel a booking?**\n   - Log into the UCS Portal and submit a change or cancellation request as soon as possible.")
      ]),
      Content.text(
          "*UTP Facility*\n\n1. How can I book any sports facilities(Swimming Pool, Futsal Court etc) in UTP?\n-You can book it on UTP UBooking portal (https://ubooking.utp.edu.my) for free.\n**Notes: You may need to login using your UTP Staff/Student Account.\n\n2. Where can i find haircut service inside UTP?\n-UTP has haircut / barber services for men run by *Kei's Barberhood* located at V2 Foyer, Level 1. You can visit https://www.instagram.com/keisbarberhood to see their service info, operating hour etc.\n\n3. How can i get haircut in UTP?\n-You can go to *Kei's Barberhood* for men located at V2, Foyer, Level 1. Make sure to visit and contact https://www.instagram.com/keisbarberhood to check their operation hour etc.\n\n4. How can I receive parcel or delivery inside UTP?\n-UTP has parcel and delivery receive service operate by *Pos Malaysia* and *Postal Hub (All courier except Pos Malaysia)* .\n-To check your parcel delivery status: \n--For Pos Malaysia, they will notify you and can collect at Pos Malaysia store at Village 4\n--For any parcel using any courier provider except Pos Malaysia, you can visit : http://tinyurl.com/postal-hub to check your delivery status"),
      Content.model([TextPart("Thank you for giving info about UTP Facility")]),
      Content.text(
          "UTP Information Resource Centre (IRC)\n\n1. How do I view list of IRC subscribed databases / online journal?\n-You can get a list of IRC-subscribed databases from the IRC website or directly click this link https://libguides.utp.edu.my/az.php\n\n2. How do I login to SciFinder?\n-SciFinder require user to create individual login. For first time registration, kindly email to zaidah_mahmud@utp.edu.my\n\n3. How to donate a book to the library?\n-You may fill out the form and provide details about the book at https://shorturl.at/CKOS9 or for further inquiries, please contact norhayatirais@utp.edu.my. For the book donation process and type of book that was accepted, you may refer to this link https://www.youtube.com/watch?v=UbOHXaWKBes.\n\n4.How can I find a book in IRC?\n-You can use our Library Catalogue to locate our collection. You can access our ULibrary (https://ulibrary.utp.edu.my) or our iSCAN at https://utp.ent.sirsidynix.net.au/client/ms_MY/default/? For guidance, please refer to this link https://www.youtube.com/watch?v=X1uRxMTVG4E\n\n5.Can I access to PETRONAS Technical Standard (PTS)?\n-Please click the link here for further information on the PTS paper. Link: https://libguides.utp.edu.my/ircresearchsupport/pts . For guideline, Please refer to this video tutorials https://www.youtube.com/watch?v=1Rv7DQb7ccE .\n\n6.How do I access IRC subscribed e-books?\n-To view and access list of e-book collections subscribed to by IRC visit https://libguides.utp.edu.my/ircebookcoll/ .\n\n7.Can outsider come/visit to IRC?\n-Yes, the public is welcome to visit IRC. Kindly refer to our operation hours at https://ulibrary.utp.edu.my/ before your visit. Upon arrival, please register your attendance in our iBEST system https://ibest.utp.edu.my/calendar/event?cid=5413&t=d&d=0000-00-00&cal=5413&inc=0 . For an official visit from the institution, please send an email to irc@utp.edu.my with details about the requested visit.\n\n8.What is UTPedia?\n-UTP now has a new digital knowledge repository product called UTPedia (The UTP Electronic and Digital Intellectual Asset). It stores digitized version of unpublished thesis, dissertation, final year project reports and past year examination questions. Users can search and browse the content of UTPedia by using Year, Subject, Department or Author for the required document. At the moment only registered UTP staff and student are eligible to access and download the full text document, whereas others can only view the abstracts and bibliographic details of the metadata. For registration please visit this link http://utpedia.utp.edu.my/\n\n9.If I lost a borrowed item, how should I do?\n-You need to report any lost or borrowed items to the circulation counter immediately. You have two options:\ni. Replace with the latest edition of books or\nii. Pay the price of books\nYou also need to pay RM30 FOR REPROCESSING FEE. If your book is overdue, you also need to pay the overdue fines. For further details, kindly email irc@utp.edu.my.\n\n10.What is Interlibrary loan and how can I use this service?\n-Interlibrary Loan (ILL) is a service that enable user to borrow or obtain resources from another library that are not available at Information Resource Centre (IRC).  Request can be made online at https://libguides.utp.edu.my/ircresearchsupport/ill \nFor assistance, kindly contact mfadzly.aziz@utp.edu.my\n\n11.Can I make an appointment with IRC librarian or officer?\n-You may choose an available time and date for an appointment with our librarian. You can visit here to book appointment https://ibest.utp.edu.my/appointments/\n\n12.Does IRC offer membership to outsiders?\n-Yes, we do. Please click the https://libguides.utp.edu.my/externalmembership for more details about our external membership. For more details, please email irc@utp.edu.my.\n\n13.Can I eat in the library?\n-You're allowed to eat at our Station 353 in the basement.\n\n14.What is a bibliographic management tools and how can these tools assist me?\n-Bibliographic management tools is a software programs that assist students and researchers in collecting, managing, and producing citations and bibliographic details for their research or final year papers. Currently, IRC subscribed to EndNote and user may download the installer at https://libguides.utp.edu.my/endnote/downloads\nFor video tutorials, Please refer here, https://www.youtube.com/watch?v=b_BgA3iGdi8\n\n15.How to access IRC online resources outside UTP campus?\n-You may login to OpenAthens through Single Sign-On (SSO). For guidelines, please refer to the video tutorial https://www.youtube.com/watch?v=Yv6FbHQlmOY\nOnly registered UTP students and staff are eligible to access this services \n\n16.When will I get confirmation on my room booking request?\n-After booking the room, you will get notification emails from the system. Your booking will be approved prior to your visit to the circulation counter on the designated date and time that you have booked. Please provide us with four physical matric cards at the circulation counter. The counter staff will give you an access card to enter the room.\n\n17.Can I charge my phone, laptop, or tablet in IRC?\n-Yes, IRC provides a charging port at the leisure area, ground level. We provide cable users with USB Type C, Micro USB, and Apple Lightning cables. 8 slots with keys are available for users.\n\n18.How do I book room facilities?\n-You can book through a booking system called iBest. Please click here: ibest.utp.edu.my.\nFor guidance, please refer to this video https://www.youtube.com/watch?v=WIynx6qqmh0\n\n19.Where should we refer to a specific department, program, course syllabus, or reading list?\n-Kindly visit https://libguides.utp.edu.my/facultyguide > Name of Department > Reading List Tab\nFor guidance, please refer to video tutorial https://www.youtube.com/watch?v=7dg6FZ-N4c8\n\n20.Where can I find journal article subscribed by IRC?\n-You can get a list of online resources from IRC website(Visit ulibrary.utp.edu.my > Research Support > E-Resources (A-Z Databases). For access outside UTP campus, please use OpenAthens account.\n\n21.How do I renew my library loans through the library website?\n-Here the steps:\ni.Go to https://ulibrary.utp.edu.my/\nii.Click Library Login tab (above right)\niii.Click Log In tab\niv.Insert your credential \nv.View page.\ni.Click check box on the desired item want to be renewed. then click renew selected item button\n- User can only renew a book 1 week before due date.\n\n22.How to buy e-books published by UTP Press?\n-Kindly go to https://press.utp.edu.my/  to view and buy the e-books published by UTP Press. UTP Press website > Catalogue > e-Sentral \n\n23.Do IRC provide photocopying and printing service for users?\n-Yes, one (1) photocopying machine is available at ground level. Please refer to the guidelines at the machine. For further inquiries, please log in to UCS.\n\n24.Does IRC provide water dispenser to users?\n-IRC provide vending machine (food and drink) at station 353, basement level.\n\n25.How to Apply for a JOC (Job of Campus) in IRC?\n-The JOC is applicable for UTP students only. You can sent an application and resume to CSD, Centre for Student Development department.\n\n26.Does IRC subscribed paper / online paper?\n-IRC subscribed to The Star e-paper. To access the paper, please follow the video guideline https://www.youtube.com/watch?v=jDBG2OVn4Tk\n\n27.What happens if books are damaged (torn, tiers, water damage, mold)?\n-Please report if your book has been damaged. You need to report any lost of borrowed items to the circulation counter immediately. You have two options:\ni. Replace with the latest edition of books or\nii. Pay the price of books\nYou also need to pay RM30 FOR REPROCESSING FEE. If your book is overdue, you also need to pay the overdue fines. For further details, kindly email irc@utp.edu.my.\n\n28.Does IRC provide lockers to users?\n-IRC has 360 free lockers for users located in the basement (Station 353). IRC also provides 33 rental lockers (semester loaning) located at level 2. The rental fees are as below:\nDeposit = RM25 (refundable)\nRental Fee: RM15 per semester\nPlease consult IRC staff at the circulation counter for assistance.\n\n29.How do I request Turnitin software?\n-IRC does not provide Turnitin software. You can request it from DIGIT (the ITMS department) via UCS. https://ucs.utp.edu.my\n\n30.How much fine being imposed to me if I forget to return borrowed IRC item?\n-Rates for overdue items are RM0.20 /book/day.\n\n31.How to get Journal Citation Report (JCR)\n-To get the Journal Citation Report JCR, Please visit https://libguides.utp.edu.my/c.php?g=497538&p=6925198 . For user guideline, please view this video tutorials on how to get JCR https://www.youtube.com/watch?v=A_KAsPgE5rU\n\n32.What is Information Literacy Program (IL) and how this program benefits me as students?\n-IRC Information Literacy (IL) is a program designed for IRC users to promote effective use of library resources and facilities.\nFor further information, kindly refer to IRC LibGuides (Information Literacy - https://libguides.utp.edu.my/ircresearchsupport/il) or email to irc@utp.edu.my for any IL related enquiry.\nFor FYP/Researcher Information Literacy program, you may contact Pn. Zaidah (zaidah_mahmud@utp.edu.my)  for more details.\n\n33.How can I get UTP thesis templates for my references?\n-You may self-download the UTP thesis template from the link here https://libguides.utp.edu.my/c.php?g=506004&p=6676045 .\n\n34.How do I submit my article?\n-Kindly click on this link http://press.utp.edu.my/index.php/call-for-papers/ then submits your paper to the respective journal links.\n\n35.Where can I find guidelines/instruction for a specific journal?\n-Kindly click on this link http://press.utp.edu.my/ > Publication > Journal > select the respective journal links.\n\n36.How long will it take to publish my article?\n-We strive to ensure that every article is published in a timely manner. However, there is simply too much variability in the submission process, such as the willingness of reviewers to evaluate a paper on a particular topic, for us to guarantee a specific time frame for article publication. Generally, the journal publishing process will take 3 months after submission.\n\n37.Do you accept material published in other journals?\n-We do not accept articles that have been published in other journals. However, we do understand that many submissions may be a continued paper of previously published works. Due to this, we allow submissions to consist of no more than 30% previously published material.\n\n38.What is the Impact Factor of this journal?\n-We’re working on having this journal included in the ISI citation index, but we don’t have an impact factor established at this stage. We would hope to have a high impact factor based on the quality, web visibility, and accessibility of the collection.\n\n39.What are the formatting and citation guidelines?\n-Kindly click on this link http://press.utp.edu.my/index.php/author-guidelines/ to view a complete list of our author submission and citation guidelines. \n\n40. Is this journal SCOPUS indexed?\n-For your information, our journals are currently not Scopus indexed. However, we are captured in MyJurnal and Google Scholar. Also, our journal is hosted on Open Journal Systems and has a wide readership"),
      Content.model([
        TextPart(
            "## UTP Information Resource Centre (IRC) - Your Guide to Knowledge and Resources\n\n**Accessing Resources:**\n\n* **IRC Databases & Online Journals:** Find a comprehensive list on the IRC website or directly at https://libguides.utp.edu.my/az.php.\n* **SciFinder:** Requires individual login creation. Email zaidah_mahmud@utp.edu.my for first-time registration.\n* **Finding Books:** Use the Library Catalogue on ULibrary (https://ulibrary.utp.edu.my) or iSCAN (https://utp.ent.sirsidynix.net.au/client/ms_MY/default/?). Watch this guide: https://www.youtube.com/watch?v=X1uRxMTVG4E\n* **PETRONAS Technical Standard (PTS):** Access information and guidelines here: https://libguides.utp.edu.my/ircresearchsupport/pts and watch this tutorial: https://www.youtube.com/watch?v=1Rv7DQb7ccE\n* **E-books:** Browse and access IRC's e-book collection at https://libguides.utp.edu.my/ircebookcoll/.\n* **UTPedia:** Access digitized theses, dissertations, projects, and past exams. Register at http://utpedia.utp.edu.my/.\n\n**Services & Facilities:**\n\n* **Visiting IRC:** The public is welcome! Check opening hours at https://ulibrary.utp.edu.my/. Register upon arrival using iBEST: https://ibest.utp.edu.my/calendar/event?cid=5413&t=d&d=0000-00-00&cal=5413&inc=0. For official institutional visits, email irc@utp.edu.my.\n* **Lost Borrowed Items:** Report immediately to the circulation counter. Replace with the latest edition or pay the book's price plus a RM30 reprocessing fee. Overdue fines may also apply. Email irc@utp.edu.my for details.\n* **Interlibrary Loan (ILL):** Borrow resources from other libraries. Request online at https://libguides.utp.edu.my/ircresearchsupport/ill or contact mfadzly.aziz@utp.edu.my for assistance.\n* **Appointments:** Book an appointment with a librarian at https://ibest.utp.edu.my/appointments/.\n* **External Membership:** Available! Learn more at https://libguides.utp.edu.my/externalmembership or email irc@utp.edu.my.\n* **Eating in IRC:** Allowed at Station 353 in the basement.\n* **Bibliographic Management Tools:** IRC subscribes to EndNote. Download the installer and watch tutorials at https://libguides.utp.edu.my/endnote/downloads.\n* **Off-Campus Access:** Use your OpenAthens account through Single Sign-On (SSO). Watch the guide: https://www.youtube.com/watch?v=Yv6FbHQlmOY\n* **Room Bookings:** Use iBest (ibest.utp.edu.my). Watch the guide: https://www.youtube.com/watch?v=WIynx6qqmh0\n* **Department/Program Syllabuses & Reading Lists:** Find them at https://libguides.utp.edu.my/facultyguide. Watch the tutorial: https://www.youtube.com/watch?v=7dg6FZ-N4c8\n* **Renewing Loans:** Go to https://ulibrary.utp.edu.my/, log in, and click the checkbox next to the desired item. Then click \"Renew Selected Item.\" Renewals are possible one week before the due date.\n* **Photocopying & Printing:** One machine is available on the ground level. Refer to the guidelines or log in to UCS for inquiries.\n* **Water Dispensers:** Vending machines with food and drinks are available at Station 353 in the basement.\n* **JOC (Job on Campus):** UTP students can apply by sending an application and resume to the Centre for Student Development (CSD).\n* **Paper/Online Papers:** IRC subscribes to The Star e-paper. Access it with this guide: https://www.youtube.com/watch?v=jDBG2OVn4Tk\n* **Damaged Books:** Report them immediately. Replacement or payment options are available. See \"Lost Borrowed Items\" for details.\n* **Lockers:** 360 free lockers are available at Station 353 (basement). 33 rental lockers are available on level 2. Consult IRC staff for assistance.\n* **Turnitin Software:** Request it from DIGIT (ITMS department) via UCS (https://ucs.utp.edu.my). \n* **Overdue Fines:** RM0.20 per book per day.\n* **Journal Citation Report (JCR):** Access it at https://libguides.utp.edu.my/c.php?g=497538&p=6925198 and watch the tutorial: https://www.youtube.com/watch?v=A_KAsPgE5rU\n* **Information Literacy Program (IL):** Promotes effective library resource use. Learn more at https://libguides.utp.edu.my/ircresearchsupport/il or email irc@utp.edu.my. For FYP/Researcher IL, contact zaidah_mahmud@utp.edu.my. \n* **UTP Thesis Templates:** Download them at https://libguides.utp.edu.my/c.php?g=506004&p=6676045. \n\n**UTP Press & Journal Submissions:**\n\n* **Buying UTP Press E-books:** Visit https://press.utp.edu.my/ and navigate to Catalogue > e-Sentral.\n* **Submitting Articles:** Go to http://press.utp.edu.my/index.php/call-for-papers/ and submit your paper to the respective journal. \n* **Journal Guidelines/Instructions:** Find them at http://press.utp.edu.my/ > Publication > Journal > select the respective journal. \n* **Publication Timeframe:** Generally 3 months after submission, but variability exists. \n* **Previously Published Material:** Not accepted, but submissions may include up to 30% of previously published work. \n* **Impact Factor:** Not yet established, but the journal aims for a high impact factor. \n* **Formatting & Citation Guidelines:** Find them at http://press.utp.edu.my/index.php/author-guidelines/. \n* **SCOPUS Indexing:** Currently not indexed, but captured in MyJurnal and Google Scholar. \n\n**I hope this comprehensive information helps you make the most of the UTP Information Resource Centre. Please let me know if you have any further questions!**")
      ]),
      Content.text(
          "**UTP FIN (Finance)**\n\n*Payment to third party*\n\n1. Why my invoice being rejected?\na) wording \"invoice\" not clearly state\nb) no invoice number\nc) invoice number more than 16 characters\nd) no invoice date\ne) invoice date is future date\nf) no or incomplete bank account\ng) billing name is other than Universiti Teknologi PETRONAS or Institute of Technology Petronas Sdn Bhd\n\n2.What is the requirement of payment request for individual?\na) IC copy/Passport copy\nb) Bank passbook (online screesnhot is acceptable)\nc) Approved claim form\n\n3.When is the payment day for third party (vendor and individuals)?\n-Every Tuesday and Thursday based on payment due date, except for Public Holiday\n\n*Request Refund for Student*\n\n1.How to request refund for student?\na)   For all cases logged in UCS (Must have)\n-    Student ID\n-    Student Name\nb)    Additional Information/Document for refund request\n-    Reason for Refund \n-    Amount\n-    Bank Name\n-    Bank Account Number\n-    Bank Account Holder Name\n-    Attachment - Bank Statement (To verify the bank account number)\n-    Attachment – Clearance Form (Bond/Deposit & Excess Balance upon Graduation)\nKindly click on the link https://utpmy.sharepoint.com/:b:/s/ucs/EQ11bK1Psq5GuGbBWMRFxkoBSS8rg-6h7qI3vo6bacL6JA to download, fill in the details, and attach together with the case.\n\n*Request Refund for Student*\n\n1.When is the payment day for staff claims & advances?\n-Every Monday for all approved claims & advances by Friday 12 noon.\n-Every Thursday for all approved claims & advances by Tuesday 12 noon. Except for Public Holiday\n\n2.Why my claim rejected by FS2?\na) your invoice/receipt is not comply with FS2 requirements  \n-UTP name should appeared in the 1st billing name    \n-poor image quality of invoice/receipt  \n-wrong usage of \"Miscellaneous\" expense type  \n-no google maps for mileage claims  \n-booking confirmation is not a receipt/invoice\nb) no approval email from Finance & Procurement\nc) receipt/invoice is more than RM500 for procurement items\n\n3.Why cash advance not reimburse to my account after my superior's approval?\n-check your start date\n-cash advance will be reimbursed to your account at least 3 days before start date\n-if you require cash advance earlier than event/travelling date, please change start date to the earlier date\n\n4.Why my status of TVM is error in posting FI?\n-Please log incident to PET ICT on the error occured by email to ict_servicedesk@petronas.com or call 03-2331 3333 5.\n\n5.I have balance from my cash advances, what should I do?\n-Refund can be made through on-line fund transfer into company's bank account.\n-Then raise refund request in MyPassport.\n-Details of your company's bank account are as follows:-\na)Receiver Bank: CIMB Bank Berhad\nb)Receiver Name: UNI TEKNOLOGI PETRONAS\nc)Account No.: 98001000358002\n-Please inform your Finance Department immediately for any settlement made."),
      Content.model([
        TextPart(
            "**UTP FIN (Finance)**\n\n**Payment to Third Party**\n\n1. **Reasons for invoice rejection:**\n    - Incorrect wording of \"invoice\"\n    - Missing invoice number\n    - Invoice number exceeds 16 characters\n    - Missing invoice date\n    - Invoice date is in the future\n    - Missing or incomplete bank account details\n    - Billing name is not Universiti Teknologi PETRONAS or Institute of Technology Petronas Sdn Bhd\n\n2. **Payment request requirements for individuals:**\n    - IC copy/Passport copy\n    - Bank passbook (online screenshot is acceptable)\n    - Approved claim form\n\n3. **Payment day for third party (vendors and individuals):**\n    - Every Tuesday and Thursday based on payment due date, except for Public Holidays\n\n**Request Refund for Student**\n\n1. **How to request a refund for a student:**\n    - Log a case in UCS, including:\n        - Student ID\n        - Student Name\n    - Provide additional information/documents:\n        - Reason for refund\n        - Amount\n        - Bank Name\n        - Bank Account Number\n        - Bank Account Holder Name\n        - Bank Statement (to verify account number)\n        - Clearance Form (for Bond/Deposit & Excess Balance upon Graduation)\n    - Download the necessary form from https://utpmy.sharepoint.com/:b:/s/ucs/EQ11bK1Psq5GuGbBWMRFxkoBSS8rg-6h7qI3vo6bacL6JA, fill it in, and attach it to the UCS case.\n\n**Request Refund for Staff**\n\n1. **Payment day for staff claims & advances:**\n    - Every Monday for claims & advances approved by Friday 12 noon.\n    - Every Thursday for claims & advances approved by Tuesday 12 noon.\n    - Except for Public Holidays\n\n2. **Reasons for claim rejection by FS2:**\n    - Invoice/receipt does not meet FS2 requirements:\n        - UTP name not appearing in the first billing name\n        - Poor image quality of invoice/receipt\n        - Incorrect usage of \"Miscellaneous\" expense type\n        - No Google Maps for mileage claims\n        - Booking confirmation is not considered a receipt/invoice\n    - No approval email from Finance & Procurement\n    - Receipt/invoice exceeds RM500 for procurement items\n\n3. **Why cash advance is not reimbursed after superior's approval:**\n    - Check the start date\n    - Cash advance will be reimbursed at least 3 days before the start date\n    - To receive cash advance earlier than the event/traveling date, change the start date to an earlier date\n\n4. **TVM error in FI posting:**\n    - Log an incident to PET ICT at ict_servicedesk@petronas.com or 03-2331 3333\n\n5. **Handling of cash advance balance:**\n    - Refund the balance to the company's bank account via online fund transfer.\n    - Raise a refund request in MyPassport.\n    - Company bank account details:\n        - Receiver Bank: CIMB Bank Berhad\n        - Receiver Name: UNI TEKNOLOGI PETRONAS\n        - Account No.: 98001000358002\n    - Inform the Finance Department of any settlements made.")
      ]),
      Content.text(
          "***UTP REG (Registry)***\n\n**Admission, Records & Marketing (ARM)**\n\n*Acknowledgement Letter*\n\n1. What is an Acknowledgement Letter?\n-Acknowledgement Letter is proof of your studies at the University and can only be obtained if you are currently a registered student. It is also known as IPT verification letter, confirmation letter and Surat Pengesahan Belajar.\n\n2.What is the purpose of requesting an Acknowledgement Letter?\n-Acknowledgement Letter can be used for opening bank account, internship application and train discount card.\n\n3.How can I request for Acknowledgement Letter (Foundation/Undergraduate/Postgraduate)?\nKindly fill up below form:\n1. Application for Acknowledgement Letter (Foundation): https://forms.office.com/Pages/ResponsePage.aspx?id=43sYhH4D7EGInKFQ_kdkMtUsbaW4qylOu2cOQR9ScehURThaV0M2R1ZCNDZVWVEyUU9QREhYQ0s0UC4u\n2. Application for Acknowledgement Letter (Undergraduate): https://forms.office.com/Pages/ResponsePage.aspx?id=43sYhH4D7EGInKFQ_kdkMtUsbaW4qylOu2cOQR9ScehUMVhLUDJTSjZHSlYwRlNISVhTTTZZUDM2Si4u\n3. Application for Acknowledgement Letter (Postgraduate): https://forms.office.com/Pages/ResponsePage.aspx?id=43sYhH4D7EGInKFQ_kdkMtUsbaW4qylOu2cOQR9ScehUOFhBMjBOVVZTODFFTDFaV0hFQVZEQTlRWC4u\n\n4.How to request for EPF Acknowledgement Letter?\nApplication can be done through this link: https://bit.ly/UTP_EPF or kindly refer to the UCS Knowledge Base here: https://ucs.utp.edu.my/knowledgebase/article/KA-01302/en-us\n\n5.I have an enquiry regarding an Acknowledgement Letter. What should I do?\n-Please log a case through UCS Portal by following below steps:\nTitle          :      Acknowledgement Letter\nSubject     :      REG – Admission, Records & Marketing (ARM)\n\n*Update Personal Details*\n\n1.What type of personal details that can be updated in UCampus?\n• Full Name\n• Profile Picture\n• IC/Passport No.\n• Date of Birth\n• Email Address\n• Marital Status\n\n2.How to update personal details in UCampus?\n-Please log a case through UCS Portal by following below steps:\nTitle        : Update Personal Details\nType       : Request\nSubject  : REG – Admission, Records & Marketing (ARM)\nYour Enquiry:\n-Please provide the following information:\n• Student ID\n• Student Name\n• Level of Study (Foundation/Undergraduate/Postgraduate)\n• Personal Details that would like to be updated\n-Important: It is compulsory to attach together the supporting documents (e.g., Copy of IC/Passport, Passport Photo, etc)\n\n**Senate & Administration (SA)**\n\n*MQA Certificate*\n\n1.How to request for a copy of Malaysian Qualification Agency (MQA) Accreditation Certificate?\n-Please fill up the Request Form https://forms.office.com/pages/responsepage.aspx?id=43sYhH4D7EGInKFQ_kdkMtW5KrZCfTlBvVr2aU3HmN9URFdKN0c5MUs1RE0yMjIwOVRYQzVLMlhUWS4u. Kindly note that the softcopy of MQA Certificate will be emailed within five (5) working days. For more info, please contact Mr. Wan Imran (wimran_wyusoff@utp.edu.my)."),
      Content.model([
        TextPart(
            "**UTP REG (Registry)**\n\n**Admission, Records & Marketing (ARM)**\n\n**Acknowledgement Letter**\n\n1. **What is an Acknowledgement Letter?**\n   - Proof of your current enrollment at UTP.\n\n2. **Purpose of Acknowledgement Letter:**\n   - Bank account opening\n   - Internship application\n   - Train discount card\n\n3. **How to Request an Acknowledgement Letter:**\n\n   - **Foundation:** https://forms.office.com/Pages/ResponsePage.aspx?id=43sYhH4D7EGInKFQ_kdkMtUsbaW4qylOu2cOQR9ScehURThaV0M2R1ZCNDZVWVEyUU9QREhYQ0s0UC4u\n   - **Undergraduate:** https://forms.office.com/Pages/ResponsePage.aspx?id=43sYhH4D7EGInKFQ_kdkMtUsbaW4qylOu2cOQR9ScehUMVhLUDJTSjZHSlYwRlNISVhTTTZZUDM2Si4u\n   - **Postgraduate:** https://forms.office.com/Pages/ResponsePage.aspx?id=43sYhH4D7EGInKFQ_kdkMtUsbaW4qylOu2cOQR9ScehUOFhBMjBOVVZTODFFTDFaV0hFQVZEQTlRWC4u\n\n4. **EPF Acknowledgement Letter:**\n   - Application link: https://bit.ly/UTP_EPF\n   - UCS Knowledge Base: https://ucs.utp.edu.my/knowledgebase/article/KA-01302/en-us\n\n5. **Acknowledgement Letter Inquiries:**\n   - Log a case in the UCS Portal:\n     - Title: Acknowledgement Letter\n     - Subject: REG – Admission, Records & Marketing (ARM)\n\n**Update Personal Details**\n\n1. **Updatable Personal Details in UCampus:**\n   - Full Name\n   - Profile Picture\n   - IC/Passport No.\n   - Date of Birth\n   - Email Address\n   - Marital Status\n\n2. **How to Update Personal Details in UCampus:**\n   - Log a case in the UCS Portal:\n     - Title: Update Personal Details\n     - Type: Request\n     - Subject: REG – Admission, Records & Marketing (ARM)\n     - Your Enquiry:\n       - Provide Student ID, Name, Level of Study, and Personal Details to be Updated\n       - Attach supporting documents (e.g., Copy of IC/Passport, Passport Photo, etc.)\n\n**Senate & Administration (SA)**\n\n**MQA Certificate**\n\n1. **How to Request a Copy of the MQA Accreditation Certificate:**\n   - Fill out the Request Form: https://forms.office.com/pages/responsepage.aspx?id=43sYhH4D7EGInKFQ_kdkMtW5KrZCfTlBvVr2aU3HmN9URFdKN0c5MUs1RE0yMjIwOVRYQzVLMlhUWS4u\n   - Softcopy of the MQA Certificate will be emailed within five (5) working days.\n   - For more info, contact Mr. Wan Imran (wimran_wyusoff@utp.edu.my).")
      ]),
      Content.text(
          "***UTP PRO (Procurement)***\n\n**Asset Disposal**\n\n1.What is the process to request asset number?\n-Requisition of asset number is under Financial Accounting Services purview. As such, kindly contact En. Amerul Hazriq B. Ibrahim at hazriq.ibrahim@utp.edu.my or his direct line 05–3688145\n\n2.What are the criteria of asset?\n-In general, an equipment is considered as asset (fixed asset) when it fulfils the following criteria \n    i. Of a permanent nature intended for long term possession or use (not a consumable or replacement item),\n    ii. Cost RM 1,000.00 or above \n    iii. Have economic life or useful life of more than one (1) year\n\n3.Who should tag the asset?\n-At the moment, Requestor/User/Custodian is responsible to ensure their asset is properly tagged with asset number.\n\n4.When asset should be tag?\n-Newly purchased asset should be visibly & clearly tagged within 1 month after acceptance\n\n5.What is the process of asset transfer?\n-Requestor need to submit Asset Transfer Form to Procurement Office. Procurement personnel will then arrange a site-visit with Requestor for verification purpose.\n\n6.What is the process of asset disposal?\n-Requestor need to submit Asset Disposal Form to Procurement Office. It is recommended that the form is to be attached with supporting document such as: \n    i. Notification from vendor on their incapability to repair the equipment (asset) \n    ii. Notification from vendor on cost of repair of the equipment (asset\n    iii. Police or UTP Security Services Report on stolen/lost equipment (asset)\n\n7.How frequent is the submission of asset disposal?\n-Asset disposal will be exercised at least 4 times yearly (quarterly). However, due to certain factors, it might be exercised more than that.\n\n8.How long is the process of asset disposal from end-to-end?\n-Depending on certain factors, normally it could take between two (2) to six (6) months."),
      Content.model([
        TextPart(
            "**UTP PRO (Procurement)**\n\n**Asset Disposal**\n\n1. **Asset Number Request:**\n   - Contact En. Amerul Hazriq B. Ibrahim at hazriq.ibrahim@utp.edu.my or 05–3688145.\n\n2. **Asset Criteria:**\n   - Permanent nature, intended for long-term use\n   - Cost of RM 1,000.00 or above\n   - Economic/useful life of more than one (1) year\n\n3. **Asset Tagging:**\n   - Responsibility of the Requestor/User/Custodian\n   - To be done within 1 month after asset acceptance\n\n4. **Asset Transfer Process:**\n   - Submit Asset Transfer Form to the Procurement Office\n   - Procurement personnel will conduct a site visit for verification\n\n5. **Asset Disposal Process:**\n   - Submit Asset Disposal Form to the Procurement Office\n   - Attach supporting documents such as:\n     - Vendor notification of inability to repair\n     - Vendor notification of repair costs\n     - Police or UTP Security Services Report on theft/loss\n\n6. **Frequency of Asset Disposal:**\n   - Quarterly (at least 4 times yearly)\n\n7. **End-to-End Asset Disposal Timeline:**\n   - Typically 2 to 6 months, depending on factors such as:\n     - Availability of documentation\n     - Value of the asset\n     - Disposal method (auction, scrap, etc.)")
      ]),
    ]);
  }

  void _scrollDown() {
    WidgetsBinding.instance.addPostFrameCallback(
      (_) => _scrollController.animateTo(
        _scrollController.position.maxScrollExtent,
        duration: const Duration(
          milliseconds: 750,
        ),
        curve: Curves.easeOutCirc,
      ),
    );
  }

  // PRESET VALUE OF MODEL DATA
  final int preSetChatHistory = 22;

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.only(top: 5, left: 5, right: 5),
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          _chat.history.length <= preSetChatHistory
              ? const Expanded(
                  child: Center(
                      child: Padding(
                          padding: EdgeInsets.only(
                              top: 30, left: 30, right: 30, bottom: 30),
                          child: SizedBox(
                            height: 100,
                            width: 200,
                            child: Card(
                                elevation: 0,
                                child: Center(
                                  child: Text(
                                    'No conversation yet',
                                    style: TextStyle(
                                      fontSize: 16,
                                      //color: Colors.black,
                                    ),
                                  ),
                                )),
                          ))))
              : Expanded(
                  child: ListView.builder(
                    controller: _scrollController,
                    itemBuilder: (context, idx) {
                      var content = _chat.history.toList()[
                          idx + preSetChatHistory]; // Start from index 1
                      var text = content.parts
                          .whereType<TextPart>()
                          .map<String>((e) => e.text)
                          .join('');
                      return MessageWidget(
                        text: text,
                        isFromUser: content.role == 'user',
                      );
                    },
                    itemCount: _chat.history.length -
                        preSetChatHistory, // Adjust itemCount accordingly
                  ),
                ),
          Padding(
            padding: const EdgeInsets.symmetric(
              vertical: 10,
              horizontal: 5,
            ),
            child: Column(
              children: [
                Row(
                  children: [
                    Expanded(
                      child: TextField(
                        autofocus: true,
                        focusNode: _textFieldFocus,
                        decoration:
                            textFieldDecoration(context, 'Ask anything...'),
                        controller: _textController,
                        onSubmitted: (String value) {
                          _sendChatMessage(value);
                        },
                      ),
                    ),
                    const SizedBox.square(
                      dimension: 8,
                    ),
                    if (!_loading)
                      IconButton(
                        onPressed: () async {
                          _sendChatMessage(_textController.text);
                        },
                        icon: Icon(
                          Icons.send,
                          color: Theme.of(context).colorScheme.primary,
                        ),
                      )
                    else
                      LoadingAnimationWidget.flickr(
                        leftDotColor: Theme.of(context).colorScheme.primary,
                        rightDotColor: Theme.of(context).colorScheme.error,
                        size: 30,
                      ),
                  ],
                ),
                const SizedBox(
                  height: 10,
                ),
                const Text(
                    "*UAssist may display inaccurate info, including about people, so double-check its responses",
                    textAlign: TextAlign.center,
                    style: TextStyle(
                      fontSize: 11,
                    ))
              ],
            ),
          ),
        ],
      ),
    );
  }

  Future<void> _sendChatMessage(String message) async {
    setState(() {
      _loading = true;
    });

    try {
      var response = await _chat.sendMessage(
        Content.text(message),
      );
      var text = response.text;

      if (text == null) {
        _showError('Empty response.');
        return;
      } else {
        setState(() {
          _loading = false;
          _scrollDown();
        });
      }
    } catch (e) {
      _showError(e.toString());
      setState(() {
        _loading = false;
      });
    } finally {
      _textController.clear();
      setState(() {
        _loading = false;
      });
      _textFieldFocus.requestFocus();
    }
  }

  void _showError(String message) {
    showDialog(
      context: context,
      builder: (context) {
        return AlertDialog(
          title: const Text('Something went wrong'),
          content: SingleChildScrollView(
            child: Text(message),
          ),
          actions: [
            TextButton(
              onPressed: () {
                Navigator.of(context).pop();
              },
              child: const Text('OK'),
            )
          ],
        );
      },
    );
  }
}

class MessageWidget extends StatelessWidget {
  final String text;
  final bool isFromUser;

  const MessageWidget({
    super.key,
    required this.text,
    required this.isFromUser,
  });

  @override
  Widget build(BuildContext context) {
    return Row(
      mainAxisAlignment:
          isFromUser ? MainAxisAlignment.end : MainAxisAlignment.start,
      children: [
        Flexible(
          child: Container(
            constraints: const BoxConstraints(maxWidth: 600),
            decoration: BoxDecoration(
              color: isFromUser
                  ? Theme.of(context).colorScheme.primaryContainer
                  : Theme.of(context).colorScheme.surfaceVariant,
              borderRadius: BorderRadius.circular(18),
            ),
            padding: const EdgeInsets.symmetric(
              vertical: 15,
              horizontal: 20,
            ),
            margin: const EdgeInsets.only(bottom: 8),
            child: MarkdownBody(
              data: text,
            ),
          ),
        ),
      ],
    );
  }
}

InputDecoration textFieldDecoration(BuildContext context, String hintText) =>
    InputDecoration(
      contentPadding: const EdgeInsets.all(15),
      hintText: hintText,
      border: OutlineInputBorder(
        borderRadius: const BorderRadius.all(
          Radius.circular(14),
        ),
        borderSide: BorderSide(
          color: Theme.of(context).colorScheme.secondary,
        ),
      ),
      focusedBorder: OutlineInputBorder(
        borderRadius: const BorderRadius.all(
          Radius.circular(14),
        ),
        borderSide: BorderSide(
          color: Theme.of(context).colorScheme.secondary,
        ),
      ),
    );
